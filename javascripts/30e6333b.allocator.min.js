(function(){var t,e,r,n,a={}.hasOwnProperty;r=angular.module("AllocatorApp",[]),r.config(["$routeProvider","$locationProvider","$httpProvider",function(t){return t.when("/",{templateUrl:"views/loading.html",controller:"StartupCtrl"}),t.when("/fund-information",{templateUrl:"views/fund-information.html"}),t.when("/total-portfolio",{templateUrl:"views/total-portfolio.html"}),t.when("/print",{templateUrl:"views/print.html"})}]),r.run(["$rootScope","$location","allocatorService",function(t,e,r){return t.$on("$routeChangeStart",function(){return r.configured()||""===e.path()||"/"===e.path()||e.path("/"),"/total-portfolio"===e.path()&&!r.getInvestor().valid()&&r.configured()?e.path("/fund-information"):void 0})}]),r.factory("allocatorService",["$http","$q",function(){var r,n,a,o,i,s;return o=new e,o.addFund("russell"),n=[],s=[],a=[],r={},i=[],{getInvestor:function(){return o},setConfig:function(t){var e,o,l,c,u,d,p,h;for(i=t.returnDrivers,n=t.assetClasses,s=t.riskProfiles,a=t.funds,p=t.returnDrivers,l=0,u=p.length;u>l;l++)for(o=p[l],h=o.assetClasses,c=0,d=h.length;d>c;c++)e=h[c],r[e.name]=o.name;return t},getChartData:function(){return new t(i,r,o)},getReturnDriverForAssetClass:function(t){return r[t]},getReturnDrivers:function(){return i},getAssetClassMapping:function(){return r},getAssetClasses:function(){return n},getRiskProfiles:function(){return s},getFunds:function(){return a},getAssetClassMapping:function(){return r},configured:function(){return s.length>0}}}]),r.factory("docraptorService",["$http","$q","$timeout","$rootScope",function(t,e,r,n){var a;return a="P0KtJNq0B4vgTnFJJoDo",{generate:function(t,o,i,s){var l,c;return c=e.defer(),l={doc:{test:s||!1,document_type:"pdf",document_content:t,name:o,async:!0,javascript:!1,strict:"none",prince_options:{baseurl:i}}},console.log("[DocRaptor] Posting..."),$.post("http://docraptor.com/docs/?user_credentials="+a,l).done(function(t){var e,o;return console.log("[DocRaptor] ID: "+t.status_id),o=t.status_id,e=function(){return $.get("http://docraptor.com/status/"+o+"?user_credentials="+a+"&t="+ +new Date).done(function(t){return console.log("[DocRaptor] Status: "+t.status),"completed"===t.status?c.resolve(t.download_url):"failed"===t.status?c.reject("Invalid"):r(e,1e3),n.$apply()})},r(e,1e3)}).fail(function(t,e,r){return c.reject("Unable to generate PDF ("+e+")"),console.log("[DocRaptor] failed: "+e+" "+r)}),c.promise}}}]),r.filter("offsetLimitTo",function(){return function(t,e,r){var n;return t?(n=e+r,n>t.length&&(n=t.length),t.slice(e,n)):void 0}}),r.filter("percentage",["$filter",function(t){return function(e,r,n,a){return n||(n=0),isNaN(e)?a||"":(r&&(e*=100),t("number")(+e,n)+"%")}}]),r=angular.module("AllocatorApp"),n=function(){var t;return angular.bootstrap(document,["AllocatorApp"]),t=document.getElementsByTagName("html")[0],t.setAttribute("ng-app","AllocatorApp"),t.dataset&&(t.dataset.ngApp="AllocatorApp"),top!==window&&top.hasOwnProperty&&top.hasOwnProperty("postMessage")?top.postMessage({type:"apploaded"},"*"):void 0},window.google?(window.google.load("visualization","1.0",{packages:["corechart"]}),window.google.setOnLoadCallback(n)):setTimeout(n,1),r.controller("StartupCtrl",["allocatorService","$scope","$location","$http","$q",function(t,e,r,n,a){var o,i;return o=a.defer(),i=a.defer(),e.$parent.$root.loaded=!1,n.get("data/config.json").then(function(n){var a;return t.setConfig(n.data),r.search().debug&&(e.$parent.$root.debug=!0,a=t.getInvestor(),a.funds[0].fund=n.data.funds[0],a.funds[0].percentage=50,a.addFund("russell",n.data.funds[11]),a.funds[1].percentage=50,a.amount=1e5),o.resolve()}),a.all([o.promise]).then(function(){return r.search().print?r.path("/print"):(r.path("/fund-information"),e.$parent.$root.loaded=!0)})}]),r.controller("RiskReturnCtrl",["allocatorService","$scope",function(t,e){var r;return e.investor=t.getInvestor(),e.allocations=[],r=function(){var r,n,a,o,i,s,l,c;for(e.allocations.length=0,l=t.getAssetClasses(),c=[],i=0,s=l.length;s>i;i++)a=l[i],n=e.investor.allocationByAssetClass[a],r=n?n.allocation:0,o=e.investor.riskProfileTargetForAssetClass(a),c.push(e.allocations.push({sector:a,target:o,delta:r-o,actual:r}));return c},e.$watch("investor.allocationByAssetClass",r,!0),e.$watch("investor.riskProfile",r)}]),r.controller("InvestorDetailsCtrl",["allocatorService","$scope",function(t,e){return e.investor=t.getInvestor(),e.riskProfile=e.investor.riskProfile,e.data={riskProfiles:t.getRiskProfiles()},e.$watch("riskProfile",function(){return e.investor.setRiskProfile(e.riskProfile)}),e.$watch("investor.amount",function(){return e.investor.updateAllocations()})}]),r.controller("AssetAllocationCtrl",["allocatorService","$scope",function(t,e){return e.investor=t.getInvestor(),e.funds=t.getFunds(),e.assetClasses=t.getAssetClasses(),e.hideAlert=!0,e.$on("investorInvalid",function(){return e.hideAlert=!1}),e.updateFundAllocations=function(){return e.investor.updateAllocations()},e.addRussellFund=function(){return e.investor.addFund("russell")},e.addOtherFund=function(){return e.investor.addFund("other")},e.deleteFund=function(t){return e.investor.removeFundAtIndex(t)}}]),r.controller("NavigationCtrl",["allocatorService","$scope","$location","$timeout",function(t,e,r,n){return e.currentPath=function(){return r.path()},e.generateReport=function(){var r,n;return t.getInvestor().valid()?(e.dialogStatus("prepare"),e.$broadcast("resetDialog"),e.modal=angular.element(".modal"),e.dialog=angular.element(".dialog"),e.modal.show(),n=$(window).width(),r=$(window).height(),e.modal.css({width:n,height:r}),e.dialog.show(),e.dialog.css({left:n/2-e.dialog.width()/2,top:r/2-e.dialog.height()/2})):e.$broadcast("investorInvalid")},e.$on("dialogClose",function(){return e.modal.hide(),e.dialog.hide(),e.dialogCloseTimeout?n.cancel(e.dialogCloseTimeout):void 0}),e.dialogStatus=function(){},e.viewTotalPortfolio=function(){return t.getInvestor().valid()?r.path("/total-portfolio"):e.$broadcast("investorInvalid")}}]),r.controller("FundInformationCtrl",["allocatorService","$scope","$location","$timeout",function(){}]),r.controller("PortfolioViewCtrl",["allocatorService","$scope",function(t,e){return e.investor=t.getInvestor(),e.chartData=t.getChartData(),e.viewType="pie",e.$watch("investor.funds",function(){return e.chartData.updateChartData(),e.$broadcast("portfolioUpdated")},!0),e.tabs=[{label:"Asset Classes",id:"assetClass"},{label:"Funds",id:"fund"},{label:"Managers",id:"manager"}],e.selectTab=function(t){return e.selectedTab=t,e.activeData=e.chartData[t.id+"Data"]},e.$watch("activeData",function(){var t,r,n,a,o,i;for(t={},i=e.activeData,a=0,o=i.length;o>a;a++)n=i[a],r=n.category||"",t[r]?t[r].rows.push(n):t[r]={name:r,rows:[n]};return e.legend=t},!0),e.selectTab(e.tabs[0]),e.$on("selectedChart",function(t,r){return e.selectTab(e.tabs[r])}),e.isNumeric=function(t){return!isNaN(t.value)}}]),r.controller("PrintCtrl",["allocatorService","$http","$scope",function(){}]),r.controller("PrintViewCtrl",["allocatorService","$scope",function(t,e){return e.readyEvents=0,e.triggeredPrint=!1,e.$on("chartReady",function(){return e.readyEvents++,e.readyEvents>=9&&!e.triggeredPrint?(e.triggeredPrint=!0,e.$emit("readyToPrint")):void 0})}]),r=angular.module("AllocatorApp"),r.directive("chartContainer",function(){return{scope:{chartData:"=",currentChart:"@"},link:function(t,e){return e.on("mousemove click",function(r){var n,a,o,i,s,l,c,u,d;return a=[0,.65,.81,.96,.99],n=e.find(".charts"),i=n.first(),c=i.offset(),s=i.width()/2,l=i.height()/2,u=r.pageX-c.left-s,d=-(r.pageY-c.top-l),o=Math.sqrt(u*u+d*d),n.each(function(e,n){var i;return i=o/s,i>a[e]&&a[e+1]>=i?"mousemove"===r.type?$(n).css("z-index",9):"click"===r.type?t.$apply(function(){return t.$emit("selectedChart",e)}):void 0:$(n).css("z-index","")})})}}}),r.directive("portfolioChart",function(){return{scope:{chartEnabled:"@",chartDataType:"@",chartDataValues:"=",chartArea:"@",chartHole:"@",chartWidth:"@",chartHeight:"@"},link:function(t,e){var r,n;return t.data=new google.visualization.DataTable,t.data.addColumn("string",t.chartDataName),t.data.addColumn("number","Allocation"),t.chartData=t.$parent.chartData,n=function(){var e,n,a;return t.data.removeRows(0,t.data.getNumberOfRows()),a=t.chartData.dataAndColors(t.chartData.mergeData(t.chartDataValues)),n=a[0],e=a[1],t.data.addRows(n),r(e)},r=function(r){var n,a;return t.chart||(t.chart=new google.visualization.PieChart(e[0])),t.chartWidth||(t.chartWidth=e.parent().width()),t.chartHeight||(t.chartHeight=e.parent().width()),n={colors:"true"===t.chartEnabled?r:["#ccc"],backgroundColor:{fill:"transparent"},legend:{position:"none"},pieHole:t.chartHole,width:t.chartWidth,height:t.chartHeight,pieSliceText:"none",chartArea:{width:t.chartArea,height:t.chartArea},axisFontSize:0,sliceVisibilityThreshold:0,tooltip:{text:"percentage",isHtml:!1}},google.visualization.events.addListener(t.chart,"ready",function(){return t.data.getNumberOfRows()>0?t.$emit("chartReady",t.chartDataType):void 0}),google.visualization.events.addListener(t.chart,"error",function(t,e){return console.log("Chart Rendering error "+t+": "+e)}),t.chart.draw(t.data,n),$(window).on("resize",function(){return n.width=e.parent().width(),n.height=e.parent().width(),t.chart.draw(t.data,n)}),a=e.find("iframe"),a?(a.attr("allowtransparency","true"),a.contents().find("body").css("background","transparent")):void 0},t.$on("portfolioUpdated",n),t.$watch("chartEnabled",n)}}}),r.directive("chartMarkers",function(){return{replace:!1,link:function(t,e){var r;return r=function(){return e.css("left",$(".charts-container").width()/2),e.css("top",$(".charts-container").width()/2-e.height()/2)},$(window).on("resize",r),r()}}}),r.directive("chartMarker",function(){return{template:'<div class="marker"><div class="inner"><i class="bubble"></i><span class="rule"></span><span class="label"><i class="box"></i> <span>{{ markerLabel }}</span></span></div></div>',replace:!0,scope:{markerOffset:"@",markerLabel:"@"},link:function(t,e){var r;return t.markerWidth=350,t.labelWidth=240,r=function(){var r,n,a;return a=e.position().top-e.parent().height()/2,t.markerWidth=$(".charts-container").width()/2,r=t.markerWidth*t.markerOffset,n=Math.sqrt(r*r-a*a),e.css({"padding-left":n}),e.find(".rule").css("width",t.markerWidth-n),e.css("width",t.markerWidth+t.labelWidth+20-n)},t.$watch("markerOffset",function(){return r()}),$(window).on("resize",r)}}}),r.directive("chartLegend",["$timeout",function(t){return{scope:{data:"="},templateUrl:"partials/legend.html",replace:!0,link:function(e,r){var n;return n=function(){return t(function(){var t;return t=$(".charts-container").width()/2-$(r).height()/2,r.css("top",t)},0)},$(window).on("resize",n),e.$watch("data",n)}}}]),r.directive("portfolioTable",function(){return{scope:{tableDataValues:"=",title:"@"},templateUrl:"partials/portfolio-table.html",controller:["$scope","$attrs",function(e){var r;return r=new t,e.$watch("tableDataValues",function(t){var r,n,a,o,i;for(e.data={},e.sumPercentage=0,e.sumDollars=0,i=[],a=0,o=t.length;o>a;a++)n=t[a],r=n.category||"",e.data[r]?e.data[r].rows.push(n):e.data[r]={name:r,rows:[n]},e.sumPercentage+=n.value,i.push(e.sumDollars+=n.dollarValue);return i})}]}}),r=angular.module("AllocatorApp"),r.directive("allocatorAssetClasses",function(){return{restrict:"A",replace:"true",templateUrl:"partials/asset-classes.html",controller:["$scope","$attrs",function(t){return t.offsetLimitTo=function(){}}],link:function(){}}}),r.directive("clientReport",function(){return{templateUrl:"partials/client-report.html",controller:["$scope","$attrs","allocatorService",function(t,e,r){return t.clientReport=[],t.$watch("investor.allocationByAssetClass",function(){var e,n,o,i,s,l,c,u,d,p,h,f,g;t.clientReport=[],t.totalPctAllocated=0,t.totalDollarAllocated=0,d=0,u=0,l=[],f=t.investor.allocationByAssetClass;for(o in f)if(a.call(f,o))for(n=f[o],i=!1,g=n.styles,p=0,h=g.length;h>p;p++)c=g[p],e=c.allocation*t.investor.amount,s=r.getReturnDriverForAssetClass(n.name),-1===l.indexOf(s+n.name)&&d>0&&(t.clientReport.push({assetClass:"Total",stylePctAllocated:d,styleDollarAllocated:u}),d=0,u=0),t.clientReport.push({assetClass:-1===l.indexOf(s+n.name)?n.name:void 0,fund:-1===l.indexOf(s+n.name+c.fund)?c.fund:void 0,style:c.name,manager:c.manager,stylePctAllocated:c.allocation,styleDollarAllocated:e}),d+=c.allocation,u+=e,l.push(s),l.push(s+n.name),l.push(s+n.name+c.fund),t.totalPctAllocated+=c.allocation,t.totalDollarAllocated+=e;return t.clientReport.push({assetClass:"Total",stylePctAllocated:d,styleDollarAllocated:u})},!1)}]}}),r.directive("printDialog",["docraptorService","allocatorService","$compile","$timeout","$filter",function(t,e,r,n){return{templateUrl:"partials/print-dialog.html",controller:["$scope","$attrs","$window",function(t,e,r){return t.docraptor={baseUrl:"http://"+r.location.host+r.location.pathname.substr(0,r.location.pathname.lastIndexOf("/")+1),credentials:"KRBZT5dNqbJTDS9wsh1"}}],scope:{},link:function(e,a){return e.adviser={},e.printState="dialog",void 0!==window.FileReader&&a.addClass("local-file-access"),e.selectedComponents=function(){return e.components.filter(function(t){return t.checked}).map(function(t){return t.id})},e.fileInput=a.find("#logo-file"),e.fileInput.on("change",function(){var t,r;return t=this.files[0],r=new FileReader(t),r.onloadend=function(t){return e.$apply(function(){return e.adviser.logo=t.target.result})},r.readAsDataURL(t)}),e.selectFile=function(){return e.fileInput.click()},e.removeLogo=function(){return e.adviser.logo=null},e.generatePdf=function(){var t;return e.printState="generating",e.printScope&&e.printScope.$destroy(),a.find("#print-body").remove(),t='<div ng-controller="PrintViewCtrl" ng-include src="\'views/print.html\'"" id="print-body"></div>',a.append(t),e.printScope=e.$new(!0),e.printScope.now=new Date,e.printScope.adviser=e.adviser,e.printScope.selectedComponents=e.selectedComponents(),e.printScope.printState="generating",r(a.contents())(e.printScope)},e.dialogClose=function(){return e.$emit("dialogClose")},e.$on("resetDialog",function(){return e.components=[],-1===window.navigator.userAgent.indexOf("MSIE 8")&&e.components.push({id:"pie",label:"Pie Chart",checked:!1}),e.components.push({id:"table",label:"Investment breakdown table",checked:!0,disabled:!0}),e.printState="dialog"}),e.$on("readyToPrint",function(){return n(function(){var r,n;return r="<!doctype html><html><head><title>Russell Portfolio Allocator Report</title></head><body>"+$("#print-body").html()+"</body></html>",n=e.$parent.$root.debug,e.$parent.$root.debug?($("#print-debug").remove(),$("<iframe id='print-debug' width='700' height='800'></iframe>").appendTo("body"),$("#print-debug").get(0).contentDocument.write(r)):t.generate(r,"allocator.pdf",e.docraptor.baseUrl,n).then(function(t){return e.printState="ready",e.pdfURL=t}),$("#print-body").remove()},200)})}}}]),e=function(){function t(){this.allocationType="percentage",this.name="",this.funds=[],this.allocations=[],this.totalAllocationPercentage=0,this.totalAllocationDollars=0,this.allocationByAssetClass={}}return t.prototype.addFund=function(t,e){var r;return r={type:t,expectedReturn:0,percentage:0,dollars:0},"russell"===t?r.fund=e:e&&(r.assetClass=e.assetClass,r.fundName=e.fundName),r.type=t,this.funds.push(r)},t.prototype.removeFundAtIndex=function(t){return this.funds.splice(t,1)},t.prototype.setRiskProfile=function(t){return this.riskProfile=t,t?this.updateRiskActuals():void 0},t.prototype.updateCustomFunds=function(){var t,e,r,n,a;for(n=this.funds,a=[],e=0,r=n.length;r>e;e++)t=n[e],"other"===t.type?a.push(t.fund={name:t.fundName,assetClass:t.assetClass,assetClasses:[{Allocation:1,Description:t.assetClass,Allocations:[{Name:t.fundName,Allocation:1,ManagerWeights:[{Allocation:1,Name:"Unknown Manager",Style:t.assetClass}]}]}]}):a.push(void 0);return a},t.prototype.getFundAllocations=function(){var t,e,r,n,a,o,i,s,l,c,u,d,p;for(n=[],u=this.funds,a=0,s=u.length;s>a;a++)for(r=u[a],d=r.fund.assetClasses,o=0,l=d.length;l>o;o++)for(e=d[o],p=e.Allocations,i=0,c=p.length;c>i;i++)t=p[i],n.push({name:t.Name,allocation:t.Allocation*(r.percentage/100),assetClass:e.Description});return n.sort(function(t,e){return t.assetClass<e.assetClass?-1:t.assetClass>e.assetClass?1:0})},t.prototype.updateAllocationByAssetClass=function(){var t,e,r,n,a,o,i,s,l;for(this.allocationByAssetClass={},r=[],s=this.funds,l=[],o=0,i=s.length;i>o;o++)n=s[o],n.fund&&l.push(function(){var o,i,s,l;for(s=n.fund.assetClasses,l=[],o=0,i=s.length;i>o;o++)e=s[o],-1===r.indexOf(e.Description)&&r.push(e.Description),this.allocationByAssetClass.hasOwnProperty(e.Description)||(this.allocationByAssetClass[e.Description]={name:e.Description,allocation:0,styles:[]}),this.allocationByAssetClass[e.Description].allocation+=e.Allocation*(n.percentage/100),l.push(function(){var r,o,i,s;for(i=e.Allocations,s=[],r=0,o=i.length;o>r;r++)t=i[r],s.push(function(){var r,o,i,s;for(i=t.ManagerWeights,s=[],r=0,o=i.length;o>r;r++)a=i[r],s.push(this.allocationByAssetClass[e.Description].styles.push({fund:t.Name,manager:a.Name,name:a.Style,allocation:a.Allocation*(n.percentage/100)}));return s}.call(this));return s}.call(this));return l}.call(this));return l},t.prototype.updateRiskActuals=function(){var t,e,r,n,a,o,i,s,l,c,u,d,p,h;for(this.updateAllocationByAssetClass(),this.allocations.length=0,u=this.riskProfile.allocations,h=[],a=0,s=u.length;s>a;a++){for(e=u[a],t=0,d=this.funds,o=0,l=d.length;l>o;o++)if(n=d[o],n.fund)for(p=n.fund.assetClasses,i=0,c=p.length;c>i;i++)r=p[i],r.Description===e.sector&&(t+=n.percentage/100*r.Allocation);h.push(this.allocations.push({sector:e.sector,target:e.target,delta:t-e.target,actual:t}))}return h},t.prototype.riskProfileTargetForAssetClass=function(t){var e;return this.riskProfile?function(){var r,n,a,o;for(a=this.riskProfile.allocations,o=[],r=0,n=a.length;n>r;r++)e=a[r],e.sector===t&&o.push(e.target);return o}.call(this)[0]||0:0/0},t.prototype.updateAllocations=function(){var a,b,c,d;for(this.totalAllocationPercentage=0,this.totalAllocationDollars=0,d=this.funds,b=0,c=d.length;c>b;b++)a=d[b],"percentage"===this.allocationType?(a.dollars=this.amount*(a.percentage/100),this.totalAllocationDollars+=a.dollars,this.totalAllocationPercentage+=+a.percentage):(a.percentage=(a.dollars/this.amount*100).toFixed(9),this.totalAllocationDollars+=a.dollars,this.totalAllocationPercentage=this.totalAllocationDollars/this.amount*100);return this.updateCustomFunds(),this.updateAllocationByAssetClass(),this.riskProfile?this.updateRiskActuals():void 0},t.prototype.valid=function(){var t,e,r;return e=100===this.totalAllocationPercentage&&this.amount>0,r=function(){var e,r,n,a;for(n=this.funds,a=[],e=0,r=n.length;r>e;e++)t=n[e],("other"===t.type&&t.assetClass&&t.fundName||"russell"===t.type&&t.fund&&t.percentage>0)&&a.push(t);return a}.call(this),e&&r.length===this.funds.length&&this.funds.length>0},t}(),t=function(){function t(t,e,r){this.investor=r,this.returnDrivers=t,this.assetClassMapping=e,this.returnDriverData=[],this.assetClassData=[],this.fundData=[],this.managerData=[],this.returnDriverColors=[],this.assetClassColors=[],this.fundColors=[],this.managerColors=[]}return t.prototype.mergeData=function(t){var e,r,n,a;for(a=[],r=0,n=t.length;n>r;r++)e=t[r],a.push([e.label,e.value,e]);return a},t.prototype.dataAndColors=function(t){var e,r,n,a,o;for(r=[],e=[],a=0,o=t.length;o>a;a++)n=t[a],r.push([n[0],n[1]]),e.push(n[2].color);return[r,e]},t.prototype.updateChartData=function(){var t,e,r,n,a,o,i,s,l,c,u,d,p,h,f,g,v,m,y,w,A,$,C,D,b;for(h=function(t,e,r){return t[e]||(t[e]=0),t[e]+=r},p={},n={},a={},$=this.investor.funds,g=0,y=$.length;y>g;g++)for(u=$[g],C=u.fund.assetClasses,v=0,w=C.length;w>v;v++)e=C[v],d=this.assetClassMapping[e.Description],t=e.Allocation*(u.percentage/100),h(p,d,t),h(n,e.Description,t);for(this.returnDriverData.length=0,this.assetClassData.length=0,this.fundData.length=0,this.managerData.length=0,D=this.returnDrivers,b=[],m=0,A=D.length;A>m;m++)d=D[m],this.returnDriverData.push({key:d.name,label:d.name,value:p[d.name],color:d.color,dollarValue:p[d.name]*this.investor.amount,category:null}),b.push(function(){var t,a,p,h;for(p=d.assetClasses,h=[],t=0,a=p.length;a>t;t++)e=p[t],r=n[e.name],r&&this.assetClassData.push({key:e.name,label:e.name,value:r,color:e.color,dollarValue:r*this.investor.amount,category:null}),h.push(function(){var t,r,n,a;for(n=this.investor.funds,a=[],r=0,t=n.length;t>r;r++)u=n[r],a.push(function(){var t,r,n,a;for(n=u.fund.assetClasses,a=[],r=0,t=n.length;t>r;r++)i=n[r],i.Description===e.name?a.push(function(){var t,r,n,a;for(n=i.Allocations,a=[],r=0,t=n.length;t>r;r++)o=n[r],l=e.name+"-"+o.name,f=o.Allocation*(u.percentage/100),this.fundData.push({key:l,label:o.Name,value:f,dollarValue:f*this.investor.amount,color:e.color,category:e.name}),a.push(function(){var t,r,n,a;for(n=o.ManagerWeights,a=[],s=r=0,t=n.length;t>r;s=++r)c=n[s],f=c.Allocation*(u.percentage/100),a.push(this.managerData.push({key:l+"-"+c.Name,label:c.Name,value:f,dollarValue:f*this.investor.amount,color:e.color,category:o.Name}));return a}.call(this));return a}.call(this)):a.push(void 0);return a}.call(this));return a}.call(this));return h}.call(this));return b},t}(),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e,r,n,a,o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(e=[],r=arguments[1],n=0;i>n;n++)n in o&&(a=o[n],t.call(r,a,n,o)&&e.push(a));return e}),Array.prototype.map||(Array.prototype.map=function(t,e){var r,n,a;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(r=e),n=Array(i),a=0;i>a;){var s,l;a in o&&(s=o[a],l=t.call(r,s,a,o),n[a]=l),a++}return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r,n,a=e?e:0;if(!this)throw new TypeError;if(n=this.length,0===n||a>=n)return-1;for(0>a&&(a=n-Math.abs(a)),r=a;n>r;r++)if(this[r]===t)return r;return-1}),("undefined"==typeof console||console.log===void 0)&&(console={log:function(){}})}).call(this);