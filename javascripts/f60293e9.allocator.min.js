(function(){var a,b,c,d,e={}.hasOwnProperty;c=angular.module("AllocatorApp",[]),c.config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){return a.when("/",{templateUrl:"views/loading.html",controller:"StartupCtrl"}),a.when("/fund-information",{templateUrl:"views/fund-information.html"}),a.when("/total-portfolio",{templateUrl:"views/total-portfolio.html"}),a.when("/print",{templateUrl:"views/print.html"})}]),c.run(["$rootScope","$location","allocatorService",function(a,b,c){return a.$on("$routeChangeStart",function(a,d,e){if(c.configured()||""===b.path()||"/"===b.path()||b.path("/"),"/total-portfolio"===b.path()&&!c.getInvestor().valid()&&c.configured())return b.path("/fund-information")})}]),c.factory("allocatorService",["$http","$q",function(c,d){var e,f,g,h,i,j;return h=new b,h.addFund("russell"),f=[],j=[],g=[],e={},i=[],{getInvestor:function(){return h},setConfig:function(a){var b,c,d,h,k,l,m,n;for(i=a.returnDrivers,f=a.assetClasses,j=a.riskProfiles,g=a.funds,m=a.returnDrivers,d=0,k=m.length;d<k;d++)for(c=m[d],n=c.assetClasses,h=0,l=n.length;h<l;h++)b=n[h],e[b.name]=c.name;return a},getChartData:function(){return new a(i,e,h)},getReturnDriverForAssetClass:function(a){return e[a]},getReturnDrivers:function(){return i},getAssetClassMapping:function(){return e},getAssetClasses:function(){return f},getRiskProfiles:function(){return j},getFunds:function(){return g},getAssetClassMapping:function(){return e},configured:function(){return j.length>0}}}]),c.factory("docraptorService",["$http","$q","$timeout","$rootScope",function(a,b,c,d){var e;return e="P0KtJNq0B4vgTnFJJoDo",{generate:function(a,f,g,h){var i,j;return j=b.defer(),i={doc:{test:h||!1,document_type:"pdf",document_content:a,name:f,async:!0,javascript:!1,strict:"none",prince_options:{baseurl:g}}},console.log("[DocRaptor] Posting..."),$.post("//docraptor.com/docs/?user_credentials="+e,i).done(function(a){var b,f;return console.log("[DocRaptor] ID: "+a.status_id),f=a.status_id,b=function(){return $.get("//docraptor.com/status/"+f+"?user_credentials="+e+"&t="+ +new Date).done(function(a){return console.log("[DocRaptor] Status: "+a.status),"completed"===a.status?j.resolve(a.download_url):"failed"===a.status?j.reject("Invalid"):c(b,1e3),d.$apply()})},c(b,1e3)}).fail(function(a,b,c){return j.reject("Unable to generate PDF ("+b+")"),console.log("[DocRaptor] failed: "+b+" "+c)}),j.promise}}}]),c.filter("offsetLimitTo",function(){return function(a,b,c){var d;if(a)return d=b+c,d>a.length&&(d=a.length),a.slice(b,d)}}),c.filter("percentage",["$filter",function(a){return function(b,c,d,e){return d||(d=0),isNaN(b)?e||"":(c&&(b*=100),a("number")(+b,d)+"%")}}]),c=angular.module("AllocatorApp"),d=function(){var a;if(angular.bootstrap(document,["AllocatorApp"]),a=document.getElementsByTagName("html")[0],a.setAttribute("ng-app","AllocatorApp"),a.dataset&&(a.dataset.ngApp="AllocatorApp"),top!==window&&top.hasOwnProperty&&top.hasOwnProperty("postMessage"))return top.postMessage({type:"apploaded"},"*")},window.google?(window.google.load("visualization","1.0",{packages:["corechart"]}),window.google.setOnLoadCallback(d)):setTimeout(d,1),c.controller("StartupCtrl",["allocatorService","$scope","$location","$http","$q",function(a,b,c,d,e){var f,g;return f=e.defer(),g=e.defer(),b.$parent.$root.loaded=!1,d.get("data/config.json").then(function(d){var e;return a.setConfig(d.data),c.search().debug&&(b.$parent.$root.debug=!0,e=a.getInvestor(),e.funds[0].fund=d.data.funds[0],e.funds[0].percentage=33,e.addFund("russell",d.data.funds[11]),e.funds[1].percentage=33,e.addFund("russell",d.data.funds[2]),e.funds[2].percentage=34,e.amount=1e5),f.resolve()}),e.all([f.promise]).then(function(){return c.search().print?c.path("/print"):(c.path("/fund-information"),b.$parent.$root.loaded=!0)})}]),c.controller("RiskReturnCtrl",["allocatorService","$scope",function(a,b){var c;return b.investor=a.getInvestor(),b.allocations=[],c=function(){var c,d,e,f,g,h,i,j;for(b.allocations.length=0,i=a.getAssetClasses(),j=[],g=0,h=i.length;g<h;g++)e=i[g],d=b.investor.allocationByAssetClass[e],c=d?d.allocation:0,f=b.investor.riskProfileTargetForAssetClass(e),j.push(b.allocations.push({sector:e,target:f,delta:c-f,actual:c}));return j},b.$watch("investor.allocationByAssetClass",c,!0),b.$watch("investor.riskProfile",c)}]),c.controller("InvestorDetailsCtrl",["allocatorService","$scope",function(a,b){return b.investor=a.getInvestor(),b.riskProfile=b.investor.riskProfile,b.data={riskProfiles:a.getRiskProfiles()},b.$watch("riskProfile",function(){return b.investor.setRiskProfile(b.riskProfile)}),b.$watch("investor.amount",function(){return b.investor.updateAllocations()})}]),c.controller("AssetAllocationCtrl",["allocatorService","$scope",function(a,b){return b.investor=a.getInvestor(),b.funds=a.getFunds(),b.assetClasses=a.getAssetClasses(),b.hideAlert=!0,b.$on("investorInvalid",function(){return b.hideAlert=!1}),b.updateFundAllocations=function(){return b.investor.updateAllocations()},b.addRussellFund=function(){return b.investor.addFund("russell")},b.addOtherFund=function(){return b.investor.addFund("other")},b.deleteFund=function(a){return b.investor.removeFundAtIndex(a)}}]),c.controller("NavigationCtrl",["allocatorService","$scope","$location","$timeout",function(a,b,c,d){return b.currentPath=function(){return c.path()},b.generateReport=function(){var c,d;return a.getInvestor().valid()?(b.dialogStatus("prepare"),b.$broadcast("resetDialog"),b.modal=angular.element(".modal"),b.dialog=angular.element(".dialog"),b.modal.show(),d=$(window).width(),c=$(window).height(),b.modal.css({width:d,height:c}),b.dialog.show(),b.dialog.css({left:d/2-b.dialog.width()/2,top:c/2-b.dialog.height()/2})):b.$broadcast("investorInvalid")},b.$on("dialogClose",function(){if(b.modal.hide(),b.dialog.hide(),b.dialogCloseTimeout)return d.cancel(b.dialogCloseTimeout)}),b.dialogStatus=function(a){},b.viewTotalPortfolio=function(){return a.getInvestor().valid()?c.path("/total-portfolio"):b.$broadcast("investorInvalid")}}]),c.controller("FundInformationCtrl",["allocatorService","$scope","$location","$timeout",function(a,b,c,d){}]),c.controller("PortfolioViewCtrl",["allocatorService","$scope",function(a,b){return b.investor=a.getInvestor(),b.chartData=a.getChartData(),b.viewType="pie",b.$watch("investor.funds",function(){return b.chartData.updateChartData(),b.$broadcast("portfolioUpdated")},!0),b.tabs=[{label:"Asset Classes",id:"assetClass"},{label:"Funds",id:"fund"},{label:"Managers",id:"manager"}],b.selectTab=function(a){return b.selectedTab=a,b.activeData=b.chartData[a.id+"Data"]},b.$watch("activeData",function(){var a,c,d,e,f,g;for(a={},g=b.activeData,e=0,f=g.length;e<f;e++)d=g[e],c=d.category||"",a[c]?a[c].rows.push(d):a[c]={name:c,rows:[d]};return b.legend=a},!0),b.selectTab(b.tabs[0]),b.$on("selectedChart",function(a,c){return b.selectTab(b.tabs[c])}),b.isNumeric=function(a){return!isNaN(a.value)}}]),c.controller("PrintCtrl",["allocatorService","$http","$scope",function(a,b,c){}]),c.controller("PrintViewCtrl",["allocatorService","$scope",function(a,b){return b.readyEvents=0,b.triggeredPrint=!1,b.$on("chartReady",function(){if(b.readyEvents++,b.readyEvents>=9&&!b.triggeredPrint)return b.triggeredPrint=!0,b.$emit("readyToPrint")})}]),c=angular.module("AllocatorApp"),c.directive("chartContainer",function(){return{scope:{chartData:"=",currentChart:"@"},link:function(a,b,c){return b.on("mousemove click",function(c){var d,e,f,g,h,i,j,k,l;return e=[0,.65,.81,.96,.99],d=b.find(".charts"),g=d.first(),j=g.offset(),h=g.width()/2,i=g.height()/2,k=c.pageX-j.left-h,l=-(c.pageY-j.top-i),f=Math.sqrt(k*k+l*l),d.each(function(b,d){var g;return g=f/h,g>e[b]&&g<=e[b+1]?"mousemove"===c.type?$(d).css("z-index",9):"click"===c.type?a.$apply(function(){return a.$emit("selectedChart",b)}):void 0:$(d).css("z-index","")})})}}}),c.directive("portfolioChart",function(){return{scope:{chartEnabled:"@",chartPrinted:"@",chartDataType:"@",chartDataValues:"=",chartArea:"@",chartHole:"@",chartWidth:"@",chartHeight:"@"},link:function(a,b,c){var d,e;return a.data=new google.visualization.DataTable,a.data.addColumn("string",a.chartDataName),a.data.addColumn("number","Allocation"),a.chartData=a.$parent.chartData,e=function(){var b,c,e;return a.data.removeRows(0,a.data.getNumberOfRows()),e=a.chartData.dataAndColors(a.chartData.mergeData(a.chartDataValues)),c=e[0],b=e[1],a.data.addRows(c),d(b)},d=function(c){var d,e;if(a.chart||(a.chart=new google.visualization.PieChart(b[0])),a.chartWidth||(a.chartWidth=b.parent().width()),a.chartHeight||(a.chartHeight=b.parent().width()),d={colors:"true"===a.chartEnabled||"true"===a.chartPrinted?c:["#ccc"],backgroundColor:{fill:"transparent"},legend:{position:"none"},pieHole:a.chartHole,width:a.chartWidth,height:a.chartHeight,pieSliceText:"none",chartArea:{width:a.chartArea,height:a.chartArea},axisFontSize:0,sliceVisibilityThreshold:0,tooltip:{text:"percentage",isHtml:!1}},google.visualization.events.addListener(a.chart,"ready",function(){if(a.data.getNumberOfRows()>0)return a.$emit("chartReady",a.chartDataType)}),google.visualization.events.addListener(a.chart,"error",function(a,b){return console.log("Chart Rendering error "+a+": "+b)}),a.chart.draw(a.data,d),$(window).on("resize",function(){return d.width=b.parent().width(),d.height=b.parent().width(),a.chart.draw(a.data,d)}),e=b.find("iframe"))return e.attr("allowtransparency","true"),e.contents().find("body").css("background","transparent")},a.$on("portfolioUpdated",e),a.$watch("chartEnabled",e)}}}),c.directive("chartMarkers",function(){return{replace:!1,link:function(a,b,c){var d;return d=function(){return b.css("left",$(".charts-container").width()/2),b.css("top",$(".charts-container").width()/2-b.height()/2)},$(window).on("resize",d),d()}}}),c.directive("chartMarker",function(){return{template:'<div class="marker"><div class="inner"><i class="bubble"></i><span class="rule"></span><span class="label"><i class="box"></i> <span>{{ markerLabel }}</span></span></div></div>',replace:!0,scope:{markerOffset:"@",markerLabel:"@"},link:function(a,b,c){var d;return a.markerWidth=350,a.labelWidth=240,d=function(){var c,d,e;return e=b.position().top-b.parent().height()/2,a.markerWidth=$(".charts-container").width()/2,c=a.markerWidth*a.markerOffset,d=Math.sqrt(c*c-e*e),b.css({"padding-left":d}),b.find(".rule").css("width",a.markerWidth-d),b.css("width",a.markerWidth+a.labelWidth+20-d)},a.$watch("markerOffset",function(){return d()}),$(window).on("resize",d)}}}),c.directive("chartLegend",["$timeout",function(a){return{scope:{data:"="},templateUrl:"partials/legend.html",replace:!0,link:function(b,c,d){var e;return e=function(){return a(function(){var a;return a=$(".charts-container").width()/2-$(c).height()/2,c.css("top",a)},0)},$(window).on("resize",e),b.$watch("data",e)}}}]),c.directive("portfolioTable",function(){return{scope:{tableDataValues:"=",title:"@"},templateUrl:"partials/portfolio-table.html",controller:["$scope","$attrs",function(b,c){var d;return d=new a,b.$watch("tableDataValues",function(a){var c,d,e,f,g;for(b.data={},b.sumPercentage=0,b.sumDollars=0,g=[],e=0,f=a.length;e<f;e++)d=a[e],c=d.category||"",b.data[c]?b.data[c].rows.push(d):b.data[c]={name:c,rows:[d]},b.sumPercentage+=d.value,g.push(b.sumDollars+=d.dollarValue);return g})}]}}),c=angular.module("AllocatorApp"),c.directive("allocatorAssetClasses",function(){return{restrict:"A",replace:"true",templateUrl:"partials/asset-classes.html",controller:["$scope","$attrs",function(a,b){return a.offsetLimitTo=function(){}}],link:function(a,b,c){}}}),c.directive("clientReport",function(){return{templateUrl:"partials/client-report.html",controller:["$scope","$attrs","allocatorService",function(a,b,c){return a.clientReport=[],a.$watch("investor.allocationByAssetClass",function(){var b,d,f,g,h,i,j,k,l,m,n,o,p;a.clientReport=[],a.totalPctAllocated=0,a.totalDollarAllocated=0,l=0,k=0,i=[],o=a.investor.allocationByAssetClass;for(f in o)if(e.call(o,f))for(d=o[f],g=!1,p=d.styles,m=0,n=p.length;m<n;m++)j=p[m],b=j.allocation*a.investor.amount,h=c.getReturnDriverForAssetClass(d.name),i.indexOf(h+d.name)===-1&&l>0&&(a.clientReport.push({assetClass:"Total",stylePctAllocated:l,styleDollarAllocated:k}),l=0,k=0),a.clientReport.push({assetClass:i.indexOf(h+d.name)===-1?d.name:void 0,fund:i.indexOf(h+d.name+j.fund)===-1?j.fund:void 0,style:j.name,manager:j.manager,stylePctAllocated:j.allocation,styleDollarAllocated:b}),l+=j.allocation,k+=b,i.push(h),i.push(h+d.name),i.push(h+d.name+j.fund),a.totalPctAllocated+=j.allocation,a.totalDollarAllocated+=b;return a.clientReport.push({assetClass:"Total",stylePctAllocated:l,styleDollarAllocated:k})},!1)}]}}),c.directive("printDialog",["docraptorService","allocatorService","$compile","$timeout","$filter",function(a,b,c,d){return{templateUrl:"partials/print-dialog.html",controller:["$scope","$attrs","$window",function(a,b,c){return a.docraptor={baseUrl:"//"+c.location.host+c.location.pathname.substr(0,c.location.pathname.lastIndexOf("/")+1),credentials:"KRBZT5dNqbJTDS9wsh1"}}],scope:{},link:function(b,e,f){return b.adviser={},b.printState="dialog",b.printDelay=1e3,void 0!==window.FileReader&&e.addClass("local-file-access"),b.selectedComponents=function(){return b.components.filter(function(a){return a.checked}).map(function(a){return a.id})},b.fileInput=e.find("#logo-file"),b.fileInput.on("change",function(a){var c,d;return c=this.files[0],d=new FileReader(c),d.onloadend=function(a){return b.$apply(function(){return b.adviser.logo=a.target.result})},d.readAsDataURL(c)}),b.selectFile=function(){return b.fileInput.click()},b.removeLogo=function(){return b.adviser.logo=null},b.generatePdf=function(a){var d;return b.printState="generating",b.printScope&&b.printScope.$destroy(),e.find("#print-body").remove(),d='<div ng-controller="PrintViewCtrl" ng-include src="\'views/print.html\'"" id="print-body"></div>',e.append(d),b.printScope=b.$new(!0),b.printScope.now=new Date,b.printScope.adviser=b.adviser,b.printScope.selectedComponents=b.selectedComponents(),b.printScope.printState="generating",c(e.contents())(b.printScope)},b.dialogClose=function(){return b.$emit("dialogClose")},b.$on("resetDialog",function(){return b.components=[],window.navigator.userAgent.indexOf("MSIE 8")===-1&&b.components.push({id:"pie",label:"Pie Chart",checked:!1}),b.components.push({id:"table",label:"Investment breakdown table",checked:!0,disabled:!0}),b.printState="dialog"}),b.$on("readyToPrint",function(){return d(function(){var c,d,e;return e=document.querySelectorAll(".client-report td").length>0,!e&&b.printDelay<2e3?(console.log("PDF render error. Retrying in 2s."),b.printDelay=2e3,b.generatePdf(),!1):(c="<!doctype html><html><head><title>Russell Portfolio Allocator Report</title></head><body>"+$("#print-body").html()+"</body></html>",d=b.$parent.$root.debug,b.$parent.$root.debug?($("#print-debug").remove(),$("<iframe id='print-debug' width='700' height='800'></iframe>").appendTo("body"),$("#print-debug").get(0).contentDocument.write(c)):a.generate(c,"allocator.pdf",b.docraptor.baseUrl,d).then(function(a){return b.printState="ready",b.pdfURL=a}),$("#print-body").remove())},b.printDelay)})}}}]),b=function(){function a(a){this.allocationType="percentage",this.name="",this.funds=[],this.allocations=[],this.totalAllocationPercentage=0,this.totalAllocationDollars=0,this.allocationByAssetClass={}}return a.prototype.addFund=function(a,b){var c;return c={type:a,expectedReturn:0,percentage:0,dollars:0},"russell"===a?c.fund=b:b&&(c.assetClass=b.assetClass,c.fundName=b.fundName),c.type=a,this.funds.push(c)},a.prototype.removeFundAtIndex=function(a){return this.funds.splice(a,1)},a.prototype.setRiskProfile=function(a){if(this.riskProfile=a,a)return this.updateRiskActuals()},a.prototype.updateCustomFunds=function(){var a,b,c,d,e;for(d=this.funds,e=[],b=0,c=d.length;b<c;b++)a=d[b],"other"===a.type?e.push(a.fund={name:a.fundName,assetClass:a.assetClass,assetClasses:[{Allocation:1,Description:a.assetClass,Allocations:[{Name:a.fundName,Allocation:1,ManagerWeights:[{Allocation:1,Name:"Unknown Manager",Style:a.assetClass}]}]}]}):e.push(void 0);return e},a.prototype.getFundAllocations=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(d=[],k=this.funds,e=0,h=k.length;e<h;e++)for(c=k[e],l=c.fund.assetClasses,f=0,i=l.length;f<i;f++)for(b=l[f],m=b.Allocations,g=0,j=m.length;g<j;g++)a=m[g],d.push({name:a.Name,allocation:a.Allocation*(c.percentage/100),assetClass:b.Description});return d.sort(function(a,b){return a.assetClass<b.assetClass?-1:a.assetClass>b.assetClass?1:0})},a.prototype.updateAllocationByAssetClass=function(){var a,b,c,d,e,f,g,h,i;for(this.allocationByAssetClass={},c=[],h=this.funds,i=[],f=0,g=h.length;f<g;f++)d=h[f],d.fund&&i.push(function(){var f,g,h,i;for(h=d.fund.assetClasses,i=[],f=0,g=h.length;f<g;f++)b=h[f],c.indexOf(b.Description)===-1&&c.push(b.Description),this.allocationByAssetClass.hasOwnProperty(b.Description)||(this.allocationByAssetClass[b.Description]={name:b.Description,allocation:0,styles:[]}),this.allocationByAssetClass[b.Description].allocation+=b.Allocation*(d.percentage/100),i.push(function(){var c,f,g,h;for(g=b.Allocations,h=[],c=0,f=g.length;c<f;c++)a=g[c],h.push(function(){var c,f,g,h;for(g=a.ManagerWeights,h=[],c=0,f=g.length;c<f;c++)e=g[c],h.push(this.allocationByAssetClass[b.Description].styles.push({fund:a.Name,manager:e.Name,name:e.Style,allocation:e.Allocation*(d.percentage/100)}));return h}.call(this));return h}.call(this));return i}.call(this));return i},a.prototype.updateRiskActuals=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(this.updateAllocationByAssetClass(),this.allocations.length=0,k=this.riskProfile.allocations,n=[],e=0,h=k.length;e<h;e++){for(b=k[e],a=0,l=this.funds,f=0,i=l.length;f<i;f++)if(d=l[f],d.fund)for(m=d.fund.assetClasses,g=0,j=m.length;g<j;g++)c=m[g],c.Description===b.sector&&(a+=d.percentage/100*c.Allocation);n.push(this.allocations.push({sector:b.sector,target:b.target,delta:a-b.target,actual:a}))}return n},a.prototype.riskProfileTargetForAssetClass=function(a){var b;return this.riskProfile?function(){var c,d,e,f;for(e=this.riskProfile.allocations,f=[],c=0,d=e.length;c<d;c++)b=e[c],b.sector===a&&f.push(b.target);return f}.call(this)[0]||0:NaN},a.prototype.updateAllocations=function(){var a,b,c,d;for(this.totalAllocationPercentage=0,this.totalAllocationDollars=0,d=this.funds,b=0,c=d.length;b<c;b++)a=d[b],"percentage"===this.allocationType?(a.dollars=this.amount*(a.percentage/100),this.totalAllocationDollars+=a.dollars,this.totalAllocationPercentage+=+a.percentage):(a.percentage=(a.dollars/this.amount*100).toFixed(9),this.totalAllocationDollars+=a.dollars,this.totalAllocationPercentage=this.totalAllocationDollars/this.amount*100);if(this.updateCustomFunds(),this.updateAllocationByAssetClass(),this.riskProfile)return this.updateRiskActuals()},a.prototype.valid=function(){var a,b,c;return b=100===this.totalAllocationPercentage&&this.amount>0,c=function(){var b,c,d,e;for(d=this.funds,e=[],b=0,c=d.length;b<c;b++)a=d[b],("other"===a.type&&a.assetClass&&a.fundName||"russell"===a.type&&a.fund&&a.percentage>0)&&e.push(a);return e}.call(this),b&&c.length===this.funds.length&&this.funds.length>0},a}(),a=function(){function a(a,b,c){this.investor=c,this.returnDrivers=a,this.assetClassMapping=b,this.returnDriverData=[],this.assetClassData=[],this.fundData=[],this.managerData=[],this.returnDriverColors=[],this.assetClassColors=[],this.fundColors=[],this.managerColors=[]}return a.prototype.mergeData=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push([b.label,b.value,b]);return e},a.prototype.dataAndColors=function(a){var b,c,d,e,f;for(c=[],b=[],e=0,f=a.length;e<f;e++)d=a[e],c.push([d[0],d[1]]),b.push(d[2].color);return[c,b]},a.prototype.updateChartData=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;for(r=function(a,b,c){return a[b]||(a[b]=0),a[b]+=c},q={},d={},e={},z=this.investor.funds,t=0,w=z.length;t<w;t++)for(o=z[t],A=o.fund.assetClasses,u=0,x=A.length;u<x;u++)b=A[u],p=this.assetClassMapping[b.Description],a=b.Allocation*(o.percentage/100),r(q,p,a),r(d,b.Description,a);for(this.returnDriverData.length=0,this.assetClassData.length=0,this.fundData.length=0,this.managerData.length=0,B=this.returnDrivers,C=[],v=0,y=B.length;v<y;v++)p=B[v],this.returnDriverData.push({key:p.name,label:p.name,value:q[p.name],color:p.color,dollarValue:q[p.name]*this.investor.amount,category:null}),C.push(function(){var a,e,q,r;for(q=p.assetClasses,r=[],a=0,e=q.length;a<e;a++)b=q[a],c=d[b.name],c&&this.assetClassData.push({key:b.name,label:b.name,value:c,color:b.color,dollarValue:c*this.investor.amount,category:null}),r.push(function(){var a,c,d,e;for(d=this.investor.funds,e=[],c=0,a=d.length;c<a;c++)o=d[c],e.push(function(){var a,c,d,e;for(d=o.fund.assetClasses,e=[],c=0,a=d.length;c<a;c++)i=d[c],i.Description===b.name?e.push(function(){var a,c,d,e,p,q,r;for(p=i.Allocations,r=[],d=0,a=p.length;d<a;d++){for(f=p[d],m=b.name+"-"+f.name,s=f.Allocation*(o.percentage/100),g=null,q=this.fundData,e=0,c=q.length;e<c;e++)j=q[e],j.label===f.Name&&(g=j);g?(g.value+=s,g.dollarValue+=s*this.investor.amount):this.fundData.push({key:m,label:f.Name,value:s,dollarValue:s*this.investor.amount,color:b.color,category:b.name}),r.push(function(){var a,c,d,e,g,i,j;for(g=f.ManagerWeights,j=[],k=d=0,a=g.length;d<a;k=++d){for(n=g[k],s=n.Allocation*(o.percentage/100),h=null,i=this.managerData,e=0,c=i.length;e<c;e++)l=i[e],l.label===n.Name&&l.category===f.Name&&(h=l);h?(h.value+=s,j.push(h.dollarValue+=s*this.investor.amount)):j.push(this.managerData.push({key:m+"-"+n.Name,label:n.Name,value:s,dollarValue:s*this.investor.amount,color:b.color,category:f.Name}))}return j}.call(this))}return r}.call(this)):e.push(void 0);return e}.call(this));return e}.call(this));return r}.call(this));return C},a}(),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(null==this)throw new TypeError;var b,c,d,e,f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError;for(b=[],c=arguments[1],d=0;d<g;d++)d in f&&(e=f[d],a.call(c,e,d,f)&&b.push(e));return b}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d,e=b?b:0;if(!this)throw new TypeError;if(d=this.length,0===d||e>=d)return-1;for(e<0&&(e=d-Math.abs(e)),c=e;c<d;c++)if(this[c]===a)return c;return-1}),"undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}})}).call(this);
